From c215514def5d0e036ffec6cd0876fbba098f28b1 Mon Sep 17 00:00:00 2001
From: BlackMesa123 <giangrecosalvo9@gmail.com>
Date: Thu, 6 Jun 2024 00:32:28 +0200
Subject: [PATCH] Disable seamless HFR code

---
 smali/com/android/systemui/LsRune.smali       |  16 --
 ...cLegacyUnlockAnimationControllerImpl.smali |   7 +-
 .../systemui/keyguard/KeyguardService$2.smali |  19 +-
 ...wMediator$$ExternalSyntheticLambda11.smali |  31 ++-
 ...ewMediator$$ExternalSyntheticLambda6.smali |   7 -
 ...ewMediator$$ExternalSyntheticLambda7.smali |  51 ++---
 .../keyguard/KeyguardViewMediator$4.smali     |  25 +--
 ...iatorHelperImpl$onFinishedWakingUp$1.smali |  34 ---
 .../KeyguardViewMediatorHelperImpl.smali      | 197 ------------------
 .../statusbar/phone/CentralSurfacesImpl.smali |  26 +--
 10 files changed, 44 insertions(+), 369 deletions(-)
 delete mode 100644 smali/com/android/systemui/keyguard/KeyguardViewMediatorHelperImpl$onFinishedWakingUp$1.smali

diff --git a/smali/com/android/systemui/LsRune.smali b/smali/com/android/systemui/LsRune.smali
index 9a39c2c1..c4968143 100644
--- a/smali/com/android/systemui/LsRune.smali
+++ b/smali/com/android/systemui/LsRune.smali
@@ -36,8 +36,6 @@
 
 .field public static final COVER_VIRTUAL_DISPLAY:Z
 
-.field public static final KEYGUARD_ADJUST_REFRESH_RATE:Z
-
 .field public static final KEYGUARD_ALLOW_ROTATION:Z
 
 .field public static final KEYGUARD_DCM_LIVE_UX:Z
@@ -375,20 +373,6 @@
 
     invoke-static {v13}, Ljava/lang/Integer;->parseInt(Ljava/lang/String;)I
 
-    move-result v14
-
-    if-le v14, v12, :cond_1
-
-    move v14, v12
-
-    goto :goto_1
-
-    :cond_1
-    const/4 v14, 0x0
-
-    :goto_1
-    sput-boolean v14, Lcom/android/systemui/LsRune;->KEYGUARD_ADJUST_REFRESH_RATE:Z
-
     invoke-static {}, Lcom/samsung/android/feature/SemFloatingFeature;->getInstance()Lcom/samsung/android/feature/SemFloatingFeature;
 
     move-result-object v14
diff --git a/smali/com/android/systemui/keyguard/KeyguardSecLegacyUnlockAnimationControllerImpl.smali b/smali/com/android/systemui/keyguard/KeyguardSecLegacyUnlockAnimationControllerImpl.smali
index 348df95e..a6c8c445 100644
--- a/smali/com/android/systemui/keyguard/KeyguardSecLegacyUnlockAnimationControllerImpl.smali
+++ b/smali/com/android/systemui/keyguard/KeyguardSecLegacyUnlockAnimationControllerImpl.smali
@@ -601,13 +601,8 @@
 
     iget-object v3, v2, Lcom/android/systemui/keyguard/KeyguardViewMediator;->mHelper:Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;
 
-    sget-boolean v4, Lcom/android/systemui/LsRune;->KEYGUARD_ADJUST_REFRESH_RATE:Z
+    sget-object v4, Lcom/android/systemui/LsRune;->VALUE_CONFIG_CARRIER_TEXT_POLICY:Ljava/lang/String;
 
-    if-eqz v4, :cond_2
-
-    invoke-virtual {v3}, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->updateRefreshRate()V
-
-    :cond_2
     invoke-virtual {v3}, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->getViewMediatorProvider()Lcom/android/systemui/keyguard/ViewMediatorProvider;
 
     move-result-object v3
diff --git a/smali/com/android/systemui/keyguard/KeyguardService$2.smali b/smali/com/android/systemui/keyguard/KeyguardService$2.smali
index 87102d8f..eb4cb268 100644
--- a/smali/com/android/systemui/keyguard/KeyguardService$2.smali
+++ b/smali/com/android/systemui/keyguard/KeyguardService$2.smali
@@ -312,28 +312,15 @@
 
     invoke-virtual {p0}, Ljava/lang/Object;->getClass()Ljava/lang/Class;
 
-    sget-boolean v0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImplKt;->IS_SAFE_MODE_ENABLED:Z
+    sget-boolean p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImplKt;->IS_SAFE_MODE_ENABLED:Z
 
-    if-eqz v0, :cond_0
+    if-eqz p0, :cond_0
 
     goto :goto_0
 
     :cond_0
-    sget-boolean v0, Lcom/android/systemui/LsRune;->KEYGUARD_ADJUST_REFRESH_RATE:Z
-
-    if-eqz v0, :cond_1
-
-    invoke-virtual {p0}, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->getHandler()Landroid/os/Handler;
+    sget-object p0, Lcom/android/systemui/LsRune;->VALUE_CONFIG_CARRIER_TEXT_POLICY:Ljava/lang/String;
 
-    move-result-object v0
-
-    new-instance v1, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl$onFinishedWakingUp$1;
-
-    invoke-direct {v1, p0}, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl$onFinishedWakingUp$1;-><init>(Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;)V
-
-    invoke-virtual {v0, v1}, Landroid/os/Handler;->post(Ljava/lang/Runnable;)Z
-
-    :cond_1
     :goto_0
     invoke-static {}, Landroid/os/Trace;->endSection()V
 
diff --git a/smali/com/android/systemui/keyguard/KeyguardViewMediator$$ExternalSyntheticLambda11.smali b/smali/com/android/systemui/keyguard/KeyguardViewMediator$$ExternalSyntheticLambda11.smali
index 3ea1175e..aa513577 100644
--- a/smali/com/android/systemui/keyguard/KeyguardViewMediator$$ExternalSyntheticLambda11.smali
+++ b/smali/com/android/systemui/keyguard/KeyguardViewMediator$$ExternalSyntheticLambda11.smali
@@ -107,20 +107,15 @@
 
     invoke-virtual {v0}, Lcom/android/systemui/keyguard/KeyguardViewMediator;->userActivity()V
 
-    sget-boolean v0, Lcom/android/systemui/LsRune;->KEYGUARD_ADJUST_REFRESH_RATE:Z
+    sget-object v0, Lcom/android/systemui/LsRune;->VALUE_CONFIG_CARRIER_TEXT_POLICY:Ljava/lang/String;
 
-    if-eqz v0, :cond_1
-
-    invoke-virtual {p0}, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->updateRefreshRate()V
-
-    :cond_1
-    if-eqz p2, :cond_6
+    if-eqz p2, :cond_5
 
     sget-boolean p2, Lcom/android/systemui/LsRune;->KEYGUARD_SUB_DISPLAY_COVER:Z
 
     iget-object v0, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->keyguardDisplayManager:Lcom/android/keyguard/KeyguardDisplayManager;
 
-    if-eqz p2, :cond_2
+    if-eqz p2, :cond_1
 
     iget-object p0, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->foldControllerImpl:Lcom/android/systemui/keyguard/KeyguardFoldControllerImpl;
 
@@ -128,10 +123,10 @@
 
     move-result p0
 
-    if-eqz p0, :cond_5
+    if-eqz p0, :cond_4
 
-    :cond_2
-    if-eqz p1, :cond_5
+    :cond_1
+    if-eqz p1, :cond_4
 
     invoke-virtual {v0}, Ljava/lang/Object;->getClass()Ljava/lang/Class;
 
@@ -145,17 +140,17 @@
 
     iget p1, p0, Lcom/android/systemui/keyguard/KeyguardVisibilityMonitor;->curVisibility:I
 
-    if-nez p1, :cond_3
+    if-nez p1, :cond_2
 
     const/4 p1, 0x1
 
     goto :goto_1
 
-    :cond_3
+    :cond_2
     const/4 p1, 0x0
 
     :goto_1
-    if-eqz p1, :cond_4
+    if-eqz p1, :cond_3
 
     iget-object p1, v0, Lcom/android/keyguard/KeyguardDisplayManager;->mVisibilityListener:Lcom/android/keyguard/KeyguardDisplayManager$$ExternalSyntheticLambda0;
 
@@ -163,20 +158,18 @@
 
     goto :goto_2
 
-    :cond_4
+    :cond_3
     invoke-virtual {v0}, Lcom/android/keyguard/KeyguardDisplayManager;->hide()V
 
     goto :goto_2
 
-    :cond_5
+    :cond_4
     invoke-virtual {v0}, Lcom/android/keyguard/KeyguardDisplayManager;->show()V
 
-    :cond_6
+    :cond_5
     :goto_2
     return-void
 
-    nop
-
     :pswitch_data_0
     .packed-switch 0x0
         :pswitch_0
diff --git a/smali/com/android/systemui/keyguard/KeyguardViewMediator$$ExternalSyntheticLambda6.smali b/smali/com/android/systemui/keyguard/KeyguardViewMediator$$ExternalSyntheticLambda6.smali
index 77f10462..7f6dff84 100644
--- a/smali/com/android/systemui/keyguard/KeyguardViewMediator$$ExternalSyntheticLambda6.smali
+++ b/smali/com/android/systemui/keyguard/KeyguardViewMediator$$ExternalSyntheticLambda6.smali
@@ -3272,13 +3272,6 @@
     invoke-virtual {v0}, Lcom/android/systemui/util/DesktopManagerImpl;->notifyShowKeyguard()V
 
     :cond_c
-    sget-boolean v0, Lcom/android/systemui/LsRune;->KEYGUARD_ADJUST_REFRESH_RATE:Z
-
-    if-eqz v0, :cond_d
-
-    invoke-virtual {v1}, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->updateRefreshRate()V
-
-    :cond_d
     iput-boolean v3, v1, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->disableRemoteUnlockAnimation:Z
 
     iget-object v0, v1, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->fixedRotationMonitor:Lcom/android/systemui/keyguard/KeyguardFixedRotationMonitor;
diff --git a/smali/com/android/systemui/keyguard/KeyguardViewMediator$$ExternalSyntheticLambda7.smali b/smali/com/android/systemui/keyguard/KeyguardViewMediator$$ExternalSyntheticLambda7.smali
index f3c4e48d..8adb47da 100644
--- a/smali/com/android/systemui/keyguard/KeyguardViewMediator$$ExternalSyntheticLambda7.smali
+++ b/smali/com/android/systemui/keyguard/KeyguardViewMediator$$ExternalSyntheticLambda7.smali
@@ -361,22 +361,15 @@
     invoke-virtual {v0, v2}, Lcom/android/systemui/keyguard/KeyguardFoldControllerImpl;->resetFoldOpenState(Z)V
 
     :cond_9
-    sget-boolean v0, Lcom/android/systemui/LsRune;->KEYGUARD_ADJUST_REFRESH_RATE:Z
-
-    if-eqz v0, :cond_a
-
-    invoke-virtual {p0}, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->updateRefreshRate()V
-
-    :cond_a
     invoke-virtual {p0}, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->isSecure()Z
 
     move-result v0
 
-    if-nez v0, :cond_b
+    if-nez v0, :cond_a
 
     goto :goto_3
 
-    :cond_b
+    :cond_a
     new-instance v0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl$onSecurityPropertyUpdated$1;
 
     invoke-direct {v0, p0}, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl$onSecurityPropertyUpdated$1;-><init>(Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;)V
@@ -392,23 +385,23 @@
 
     iget-boolean v1, v0, Lcom/android/systemui/keyguard/KeyguardFixedRotationMonitor;->isMonitorStarted:Z
 
-    if-eqz v1, :cond_c
+    if-eqz v1, :cond_b
 
     iget-boolean v1, v0, Lcom/android/systemui/keyguard/KeyguardFixedRotationMonitor;->isFixedRotated:Z
 
-    if-eqz v1, :cond_c
+    if-eqz v1, :cond_b
 
     move v2, v3
 
-    :cond_c
-    if-nez v2, :cond_d
+    :cond_b
+    if-nez v2, :cond_c
 
     invoke-virtual {v0}, Lcom/android/systemui/keyguard/KeyguardFixedRotationMonitor;->cancel()V
 
-    :cond_d
+    :cond_c
     sget-boolean v0, Lcom/android/systemui/LsRune;->AOD_FULLSCREEN:Z
 
-    if-eqz v0, :cond_e
+    if-eqz v0, :cond_d
 
     iget-object p0, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->centralSurfacesLazy:Ldagger/Lazy;
 
@@ -426,7 +419,7 @@
 
     invoke-virtual {p0, v0}, Lcom/android/systemui/statusbar/LightRevealScrim;->setRevealAmount(F)V
 
-    :cond_e
+    :cond_d
     return-void
 
     :pswitch_a
@@ -456,13 +449,13 @@
 
     const/16 v7, 0x67
 
-    if-ne v6, v7, :cond_12
+    if-ne v6, v7, :cond_11
 
-    if-eqz v1, :cond_12
+    if-eqz v1, :cond_11
 
     iget-boolean v1, v1, Lcom/samsung/android/cover/CoverState;->attached:Z
 
-    if-eqz v1, :cond_12
+    if-eqz v1, :cond_11
 
     iget-object v1, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->settingsHelper:Lcom/android/systemui/util/SettingsHelper;
 
@@ -470,18 +463,18 @@
 
     move-result v1
 
-    if-eqz v1, :cond_12
+    if-eqz v1, :cond_11
 
     const/4 v1, -0x1
 
-    if-eq v5, v1, :cond_f
+    if-eq v5, v1, :cond_e
 
-    if-nez v4, :cond_11
+    if-nez v4, :cond_10
 
     goto :goto_4
 
-    :cond_f
-    if-eqz v4, :cond_10
+    :cond_e
+    if-eqz v4, :cond_f
 
     iget-object v1, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->userTracker:Lcom/android/systemui/settings/UserTracker;
 
@@ -495,18 +488,18 @@
 
     move-result v0
 
-    if-eqz v0, :cond_11
+    if-eqz v0, :cond_10
 
-    :cond_10
+    :cond_f
     :goto_4
     move v2, v3
 
-    :cond_11
-    if-eqz v2, :cond_12
+    :cond_10
+    if-eqz v2, :cond_11
 
     invoke-virtual {p0}, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->removeShowMsg()V
 
-    :cond_12
+    :cond_11
     return-void
 
     :goto_5
diff --git a/smali/com/android/systemui/keyguard/KeyguardViewMediator$4.smali b/smali/com/android/systemui/keyguard/KeyguardViewMediator$4.smali
index 4fe3e03a..0b3850fb 100644
--- a/smali/com/android/systemui/keyguard/KeyguardViewMediator$4.smali
+++ b/smali/com/android/systemui/keyguard/KeyguardViewMediator$4.smali
@@ -612,33 +612,12 @@
 .end method
 
 .method public final userActivity()V
-    .locals 4
+    .locals 1
 
-    sget-boolean v0, Lcom/android/systemui/LsRune;->KEYGUARD_ADJUST_REFRESH_RATE:Z
+    sget-object v0, Lcom/android/systemui/LsRune;->VALUE_CONFIG_CARRIER_TEXT_POLICY:Ljava/lang/String;
 
     iget-object p0, p0, Lcom/android/systemui/keyguard/KeyguardViewMediator$4;->this$0:Lcom/android/systemui/keyguard/KeyguardViewMediator;
 
-    if-eqz v0, :cond_0
-
-    iget-object p0, p0, Lcom/android/systemui/keyguard/KeyguardViewMediator;->mHelper:Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;
-
-    invoke-virtual {p0}, Ljava/lang/Object;->getClass()Ljava/lang/Class;
-
-    invoke-static {}, Landroid/os/SystemClock;->uptimeMillis()J
-
-    move-result-wide v0
-
-    const/4 v2, 0x0
-
-    iget-object p0, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->pm:Landroid/os/PowerManager;
-
-    const/4 v3, 0x2
-
-    invoke-virtual {p0, v0, v1, v3, v2}, Landroid/os/PowerManager;->userActivity(JII)V
-
-    return-void
-
-    :cond_0
     invoke-virtual {p0}, Lcom/android/systemui/keyguard/KeyguardViewMediator;->userActivity()V
 
     return-void
diff --git a/smali/com/android/systemui/keyguard/KeyguardViewMediatorHelperImpl$onFinishedWakingUp$1.smali b/smali/com/android/systemui/keyguard/KeyguardViewMediatorHelperImpl$onFinishedWakingUp$1.smali
deleted file mode 100644
index ad61c4f5..00000000
--- a/smali/com/android/systemui/keyguard/KeyguardViewMediatorHelperImpl$onFinishedWakingUp$1.smali
+++ /dev/null
@@ -1,34 +0,0 @@
-.class public final Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl$onFinishedWakingUp$1;
-.super Ljava/lang/Object;
-.source "qb/80280162 b97f711e0c9e0e38f60dd4fc7ddb02f98a260047fe7a746bf11c836a2b2aedc0"
-
-# interfaces
-.implements Ljava/lang/Runnable;
-
-
-# instance fields
-.field public final synthetic this$0:Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;
-
-
-# direct methods
-.method public constructor <init>(Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;)V
-    .locals 0
-
-    iput-object p1, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl$onFinishedWakingUp$1;->this$0:Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;
-
-    invoke-direct {p0}, Ljava/lang/Object;-><init>()V
-
-    return-void
-.end method
-
-
-# virtual methods
-.method public final run()V
-    .locals 0
-
-    iget-object p0, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl$onFinishedWakingUp$1;->this$0:Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;
-
-    invoke-virtual {p0}, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->updateRefreshRate()V
-
-    return-void
-.end method
diff --git a/smali/com/android/systemui/keyguard/KeyguardViewMediatorHelperImpl.smali b/smali/com/android/systemui/keyguard/KeyguardViewMediatorHelperImpl.smali
index bf0bae67..30b95fd3 100644
--- a/smali/com/android/systemui/keyguard/KeyguardViewMediatorHelperImpl.smali
+++ b/smali/com/android/systemui/keyguard/KeyguardViewMediatorHelperImpl.smali
@@ -71,8 +71,6 @@
 
 .field public final dismissCallbackRegistry:Lcom/android/systemui/keyguard/DismissCallbackRegistry;
 
-.field public displayManager:Landroid/hardware/display/IDisplayManager;
-
 .field public doKeyguardPendingIntent:Landroid/app/PendingIntent;
 
 .field public drawnCallback:Lcom/android/internal/policy/IKeyguardDrawnCallback;
@@ -141,8 +139,6 @@
 
 .field public final looperLogController:Lcom/android/systemui/uithreadmonitor/LooperSlowLogController;
 
-.field public maxRefreshRateToken:Lcom/samsung/android/hardware/display/IRefreshRateToken;
-
 .field public final notificationShadeWindowControllerLazy:Ldagger/Lazy;
 
 .field public final notificationsController:Lcom/android/systemui/statusbar/notification/init/NotificationsController;
@@ -2404,196 +2400,3 @@
     :cond_9
     return-void
 .end method
-
-.method public final updateRefreshRate()V
-    .locals 6
-
-    const-string/jumbo v0, "updateRefreshRate enabled "
-
-    iget-object v1, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->fixedRefreshRate$delegate:Lkotlin/Lazy;
-
-    invoke-interface {v1}, Lkotlin/Lazy;->getValue()Ljava/lang/Object;
-
-    move-result-object v2
-
-    check-cast v2, Ljava/lang/Integer;
-
-    if-nez v2, :cond_0
-
-    return-void
-
-    :cond_0
-    sget-boolean v2, Lcom/android/systemui/LsRune;->KEYGUARD_SUB_DISPLAY_LOCK:Z
-
-    const/4 v3, 0x1
-
-    if-eqz v2, :cond_1
-
-    iget-object v2, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->foldControllerImpl:Lcom/android/systemui/keyguard/KeyguardFoldControllerImpl;
-
-    invoke-virtual {v2}, Lcom/android/systemui/keyguard/KeyguardFoldControllerImpl;->isFoldOpened()Z
-
-    move-result v2
-
-    if-nez v2, :cond_1
-
-    move v2, v3
-
-    goto :goto_0
-
-    :cond_1
-    const/4 v2, 0x0
-
-    :goto_0
-    iget-object v4, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->settingsHelper:Lcom/android/systemui/util/SettingsHelper;
-
-    invoke-virtual {v4, v2}, Lcom/android/systemui/util/SettingsHelper;->getRefreshRateMode(Z)I
-
-    move-result v2
-
-    if-eq v2, v3, :cond_2
-
-    const/4 v3, 0x2
-
-    if-ne v2, v3, :cond_5
-
-    :cond_2
-    iget-object v2, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->viewMediatorLazy:Ldagger/Lazy;
-
-    invoke-interface {v2}, Ldagger/Lazy;->get()Ljava/lang/Object;
-
-    move-result-object v2
-
-    check-cast v2, Lcom/android/systemui/keyguard/KeyguardViewMediator;
-
-    invoke-virtual {v2}, Lcom/android/systemui/keyguard/KeyguardViewMediator;->isShowingAndNotOccluded()Z
-
-    move-result v2
-
-    if-eqz v2, :cond_5
-
-    invoke-virtual {p0}, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->isUnlockStartedOrFinished()Z
-
-    move-result v2
-
-    if-nez v2, :cond_5
-
-    iget-object v2, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->maxRefreshRateToken:Lcom/samsung/android/hardware/display/IRefreshRateToken;
-
-    const-string v3, "KeyguardViewMediator"
-
-    if-nez v2, :cond_4
-
-    iget-object v2, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->displayManager:Landroid/hardware/display/IDisplayManager;
-
-    if-nez v2, :cond_3
-
-    const-string v2, "display"
-
-    invoke-static {v2}, Landroid/os/ServiceManager;->getService(Ljava/lang/String;)Landroid/os/IBinder;
-
-    move-result-object v2
-
-    invoke-static {v2}, Landroid/hardware/display/IDisplayManager$Stub;->asInterface(Landroid/os/IBinder;)Landroid/hardware/display/IDisplayManager;
-
-    move-result-object v2
-
-    iput-object v2, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->displayManager:Landroid/hardware/display/IDisplayManager;
-
-    :cond_3
-    iget-object v2, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->displayManager:Landroid/hardware/display/IDisplayManager;
-
-    if-eqz v2, :cond_4
-
-    :try_start_0
-    iget-object v4, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->refreshRateToken:Landroid/os/IBinder;
-
-    invoke-interface {v1}, Lkotlin/Lazy;->getValue()Ljava/lang/Object;
-
-    move-result-object v5
-
-    check-cast v5, Ljava/lang/Integer;
-
-    invoke-virtual {v5}, Ljava/lang/Integer;->intValue()I
-
-    move-result v5
-
-    invoke-interface {v2, v4, v5, v3}, Landroid/hardware/display/IDisplayManager;->acquireRefreshRateMaxLimitToken(Landroid/os/IBinder;ILjava/lang/String;)Lcom/samsung/android/hardware/display/IRefreshRateToken;
-
-    move-result-object v2
-
-    iput-object v2, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->maxRefreshRateToken:Lcom/samsung/android/hardware/display/IRefreshRateToken;
-
-    invoke-interface {v1}, Lkotlin/Lazy;->getValue()Ljava/lang/Object;
-
-    move-result-object v1
-
-    check-cast v1, Ljava/lang/Integer;
-
-    new-instance v2, Ljava/lang/StringBuilder;
-
-    invoke-direct {v2, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
-
-    invoke-virtual {v2, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;
-
-    const-string v0, "Hz"
-
-    invoke-virtual {v2, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
-
-    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
-
-    move-result-object v0
-
-    invoke-static {v0}, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->logD(Ljava/lang/String;)V
-    :try_end_0
-    .catch Landroid/os/RemoteException; {:try_start_0 .. :try_end_0} :catch_0
-
-    goto :goto_1
-
-    :catch_0
-    move-exception v0
-
-    invoke-virtual {v0}, Landroid/os/RemoteException;->printStackTrace()V
-
-    :cond_4
-    :goto_1
-    iget-object p0, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->maxRefreshRateToken:Lcom/samsung/android/hardware/display/IRefreshRateToken;
-
-    if-nez p0, :cond_6
-
-    const-string/jumbo p0, "updateRefreshRate failed"
-
-    invoke-static {v3, p0}, Lcom/android/systemui/keyguard/Log;->w(Ljava/lang/String;Ljava/lang/String;)V
-
-    goto :goto_3
-
-    :cond_5
-    iget-object v0, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->maxRefreshRateToken:Lcom/samsung/android/hardware/display/IRefreshRateToken;
-
-    if-eqz v0, :cond_6
-
-    :try_start_1
-    invoke-interface {v0}, Lcom/samsung/android/hardware/display/IRefreshRateToken;->release()V
-
-    const-string/jumbo v0, "updateRefreshRate disabled"
-
-    invoke-static {v0}, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->logD(Ljava/lang/String;)V
-    :try_end_1
-    .catch Landroid/os/RemoteException; {:try_start_1 .. :try_end_1} :catch_1
-
-    goto :goto_2
-
-    :catch_1
-    move-exception v0
-
-    invoke-virtual {v0}, Landroid/os/RemoteException;->printStackTrace()V
-
-    :goto_2
-    const/4 v0, 0x0
-
-    iput-object v0, p0, Lcom/android/systemui/keyguard/KeyguardViewMediatorHelperImpl;->maxRefreshRateToken:Lcom/samsung/android/hardware/display/IRefreshRateToken;
-
-    :cond_6
-    :goto_3
-    return-void
-.end method
diff --git a/smali_classes2/com/android/systemui/statusbar/phone/CentralSurfacesImpl.smali b/smali_classes2/com/android/systemui/statusbar/phone/CentralSurfacesImpl.smali
index 768566c1..745730b5 100644
--- a/smali_classes2/com/android/systemui/statusbar/phone/CentralSurfacesImpl.smali
+++ b/smali_classes2/com/android/systemui/statusbar/phone/CentralSurfacesImpl.smali
@@ -12245,39 +12245,21 @@
 .end method
 
 .method public final userActivity()V
-    .locals 4
+    .locals 2
 
     iget v0, p0, Lcom/android/systemui/statusbar/phone/CentralSurfacesImpl;->mState:I
 
     const/4 v1, 0x1
 
-    if-ne v0, v1, :cond_1
-
-    sget-boolean v0, Lcom/android/systemui/LsRune;->KEYGUARD_ADJUST_REFRESH_RATE:Z
-
-    if-eqz v0, :cond_0
-
-    invoke-static {}, Landroid/os/SystemClock;->uptimeMillis()J
-
-    move-result-wide v0
-
-    const/4 v2, 0x2
-
-    const/4 v3, 0x0
-
-    iget-object p0, p0, Lcom/android/systemui/statusbar/phone/CentralSurfacesImpl;->mPowerManager:Landroid/os/PowerManager;
-
-    invoke-virtual {p0, v0, v1, v2, v3}, Landroid/os/PowerManager;->userActivity(JII)V
+    if-ne v0, v1, :cond_0
 
-    goto :goto_0
+    sget-object v0, Lcom/android/systemui/LsRune;->VALUE_CONFIG_CARRIER_TEXT_POLICY:Ljava/lang/String;
 
-    :cond_0
     iget-object p0, p0, Lcom/android/systemui/statusbar/phone/CentralSurfacesImpl;->mKeyguardViewMediatorCallback:Lcom/android/keyguard/ViewMediatorCallback;
 
     invoke-interface {p0}, Lcom/android/keyguard/ViewMediatorCallback;->userActivity()V
 
-    :cond_1
-    :goto_0
+    :cond_0
     return-void
 .end method
 
-- 
2.45.2

